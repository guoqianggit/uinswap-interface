{"ast":null,"code":"var _jsxFileName = \"/root/code/solidity/uniswap/testInterface/uinswap-interface/src/pages/Vote/VotePage.tsx\";\nimport React, { useState } from 'react';\nimport { AutoColumn } from '../../components/Column';\nimport styled from 'styled-components';\nimport { TYPE, StyledInternalLink, ExternalLink } from '../../theme';\nimport { RowFixed, RowBetween } from '../../components/Row';\nimport { CardSection, DataCard } from '../../components/earn/styled';\nimport { ArrowLeft } from 'react-feather';\nimport { ButtonPrimary } from '../../components/Button';\nimport { ProposalStatus } from './styled';\nimport { useProposalData, useUserVotesAsOfBlock, useUserDelegatee } from '../../state/governance/hooks';\nimport { useTimestampFromBlock } from '../../hooks/useTimestampFromBlock';\nimport { DateTime } from 'luxon';\nimport ReactMarkdown from 'react-markdown';\nimport VoteModal from '../../components/vote/VoteModal';\nimport { JSBI } from '@uniswap/sdk';\nimport { useActiveWeb3React } from '../../hooks';\nimport { PROPOSAL_LENGTH_IN_SECS, COMMON_CONTRACT_NAMES, UNI, ZERO_ADDRESS } from '../../constants';\nimport { isAddress, getEtherscanLink } from '../../utils';\nimport { ApplicationModal } from '../../state/application/actions';\nimport { useModalOpen, useToggleDelegateModal, useToggleVoteModal } from '../../state/application/hooks';\nimport DelegateModal from '../../components/vote/DelegateModal';\nimport { GreyCard } from '../../components/Card';\nimport { useTokenBalance } from '../../state/wallet/hooks';\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`;\nconst ProposalInfo = styled(AutoColumn)`\n  border: 1px solid ${({\n  theme\n}) => theme.bg4};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`;\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({\n  theme\n}) => theme.text1};\n\n  a {\n    color: ${({\n  theme\n}) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`;\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`;\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({\n  theme\n}) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`;\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({\n  theme\n}) => theme.bg3};\n  position: relative;\n`;\nconst Progress = styled.div`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({\n  theme,\n  status\n}) => status === 'for' ? theme.green1 : theme.red1};\n  width: ${({\n  percentageString\n}) => percentageString};\n`;\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`;\nconst WrapSmall = styled(RowBetween)`\n  ${({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`;\nconst DetailText = styled.div`\n  word-break: break-all;\n`;\nexport default function VotePage({\n  match: {\n    params: {\n      id\n    }\n  }\n}) {\n  var _proposalData$startBl, _proposalData$status, _proposalData$details;\n\n  const {\n    chainId,\n    account\n  } = useActiveWeb3React(); // get data for this specific proposal\n\n  const proposalData = useProposalData(id); // update support based on button interactions\n\n  const [support, setSupport] = useState(true); // modal for casting votes\n\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE);\n  const toggleVoteModal = useToggleVoteModal(); // toggle for showing delegation modal\n\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE);\n  const toggelDelegateModal = useToggleDelegateModal(); // get and format date from data\n\n  const startTimestamp = useTimestampFromBlock(proposalData === null || proposalData === void 0 ? void 0 : proposalData.startBlock);\n  const endDate = startTimestamp ? DateTime.fromSeconds(startTimestamp).plus({\n    seconds: PROPOSAL_LENGTH_IN_SECS\n  }) : undefined;\n  const now = DateTime.local(); // get total votes and format percentages for UI\n\n  const totalVotes = proposalData ? proposalData.forCount + proposalData.againstCount : undefined;\n  const forPercentage = proposalData && totalVotes ? (proposalData.forCount * 100 / totalVotes).toFixed(0) + '%' : '0%';\n  const againstPercentage = proposalData && totalVotes ? (proposalData.againstCount * 100 / totalVotes).toFixed(0) + '%' : '0%'; // only count available votes as of the proposal start block\n\n  const availableVotes = useUserVotesAsOfBlock((_proposalData$startBl = proposalData === null || proposalData === void 0 ? void 0 : proposalData.startBlock) !== null && _proposalData$startBl !== void 0 ? _proposalData$startBl : undefined); // only show voting if user has > 0 votes at proposal start block and proposal is active,\n\n  const showVotingButtons = availableVotes && JSBI.greaterThan(availableVotes.raw, JSBI.BigInt(0)) && proposalData && proposalData.status === 'active';\n  const uniBalance = useTokenBalance(account !== null && account !== void 0 ? account : undefined, chainId ? UNI[chainId] : undefined);\n  const userDelegatee = useUserDelegatee(); // in blurb link to home page if they are able to unlock\n\n  const showLinkForUnlock = Boolean(uniBalance && JSBI.notEqual(uniBalance.raw, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS); // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n\n  const linkIfAddress = content => {\n    if (isAddress(content) && chainId) {\n      var _COMMON_CONTRACT_NAME;\n\n      const commonName = (_COMMON_CONTRACT_NAME = COMMON_CONTRACT_NAMES[content]) !== null && _COMMON_CONTRACT_NAME !== void 0 ? _COMMON_CONTRACT_NAME : content;\n      return /*#__PURE__*/React.createElement(ExternalLink, {\n        href: getEtherscanLink(chainId, content, 'address'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 14\n        }\n      }, commonName);\n    }\n\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 12\n      }\n    }, content);\n  };\n\n  return /*#__PURE__*/React.createElement(PageWrapper, {\n    gap: \"lg\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(VoteModal, {\n    isOpen: showVoteModal,\n    onDismiss: toggleVoteModal,\n    proposalId: proposalData === null || proposalData === void 0 ? void 0 : proposalData.id,\n    support: support,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DelegateModal, {\n    isOpen: showDelegateModal,\n    onDismiss: toggelDelegateModal,\n    title: \"Unlock Votes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ProposalInfo, {\n    gap: \"lg\",\n    justify: \"start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(RowBetween, {\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ArrowWrapper, {\n    to: \"/vote\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ArrowLeft, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }), \" All Proposals\"), proposalData && /*#__PURE__*/React.createElement(ProposalStatus, {\n    status: (_proposalData$status = proposalData === null || proposalData === void 0 ? void 0 : proposalData.status) !== null && _proposalData$status !== void 0 ? _proposalData$status : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 28\n    }\n  }, proposalData === null || proposalData === void 0 ? void 0 : proposalData.status)), /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"10px\",\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.largeHeader, {\n    style: {\n      marginBottom: '.5rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, proposalData === null || proposalData === void 0 ? void 0 : proposalData.title), /*#__PURE__*/React.createElement(RowBetween, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.main, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, endDate && endDate < now ? 'Voting ended ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : proposalData ? 'Voting ends approximately ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : '')), proposalData && proposalData.status === 'active' && !showVotingButtons && /*#__PURE__*/React.createElement(GreyCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.black, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }, \"Only UNI votes that were self delegated or delegated to another address before block\", ' ', proposalData.startBlock, \" are eligible for voting.\", ' ', showLinkForUnlock && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(StyledInternalLink, {\n    to: \"/vote\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }, \"Unlock voting\"), \" to prepare for the next proposal.\")))), showVotingButtons ? /*#__PURE__*/React.createElement(RowFixed, {\n    style: {\n      width: '100%',\n      gap: '12px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ButtonPrimary, {\n    padding: \"8px\",\n    borderRadius: \"8px\",\n    onClick: () => {\n      setSupport(true);\n      toggleVoteModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, \"Vote For\"), /*#__PURE__*/React.createElement(ButtonPrimary, {\n    padding: \"8px\",\n    borderRadius: \"8px\",\n    onClick: () => {\n      setSupport(false);\n      toggleVoteModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, \"Vote Against\")) : '', /*#__PURE__*/React.createElement(CardWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StyledDataCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardSection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(WrapSmall, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.black, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 19\n    }\n  }, \"For\"), /*#__PURE__*/React.createElement(TYPE.black, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 19\n    }\n  }, ' ', proposalData === null || proposalData === void 0 ? void 0 : proposalData.forCount.toLocaleString(undefined, {\n    maximumFractionDigits: 0\n  })))), /*#__PURE__*/React.createElement(ProgressWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Progress, {\n    status: 'for',\n    percentageString: forPercentage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(StyledDataCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardSection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(WrapSmall, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.black, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, \"Against\"), /*#__PURE__*/React.createElement(TYPE.black, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 19\n    }\n  }, proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstCount.toLocaleString(undefined, {\n    maximumFractionDigits: 0\n  })))), /*#__PURE__*/React.createElement(ProgressWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Progress, {\n    status: 'against',\n    percentageString: againstPercentage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.mediumHeader, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, \"Details\"), proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$details = proposalData.details) === null || _proposalData$details === void 0 ? void 0 : _proposalData$details.map((d, i) => {\n    return /*#__PURE__*/React.createElement(DetailText, {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 15\n      }\n    }, i + 1, \": \", linkIfAddress(d.target), \".\", d.functionSig, \"(\", d.callData.split(',').map((content, i) => {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }\n      }, linkIfAddress(content), d.callData.split(',').length - 1 === i ? '' : ',');\n    }), \")\");\n  })), /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.mediumHeader, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 11\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(MarkDownWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ReactMarkdown, {\n    source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(AutoColumn, {\n    gap: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TYPE.mediumHeader, {\n    fontWeight: 600,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  }, \"Proposer\"), /*#__PURE__*/React.createElement(ExternalLink, {\n    href: (proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer) && chainId ? getEtherscanLink(chainId, proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer, 'address') : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ReactMarkdown, {\n    source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 13\n    }\n  })))));\n}","map":{"version":3,"sources":["/root/code/solidity/uniswap/testInterface/uinswap-interface/src/pages/Vote/VotePage.tsx"],"names":["React","useState","AutoColumn","styled","TYPE","StyledInternalLink","ExternalLink","RowFixed","RowBetween","CardSection","DataCard","ArrowLeft","ButtonPrimary","ProposalStatus","useProposalData","useUserVotesAsOfBlock","useUserDelegatee","useTimestampFromBlock","DateTime","ReactMarkdown","VoteModal","JSBI","useActiveWeb3React","PROPOSAL_LENGTH_IN_SECS","COMMON_CONTRACT_NAMES","UNI","ZERO_ADDRESS","isAddress","getEtherscanLink","ApplicationModal","useModalOpen","useToggleDelegateModal","useToggleVoteModal","DelegateModal","GreyCard","useTokenBalance","PageWrapper","ProposalInfo","theme","bg4","ArrowWrapper","text1","CardWrapper","div","StyledDataCard","bg1","ProgressWrapper","bg3","Progress","status","green1","red1","percentageString","MarkDownWrapper","WrapSmall","mediaWidth","upToSmall","DetailText","VotePage","match","params","id","chainId","account","proposalData","support","setSupport","showVoteModal","VOTE","toggleVoteModal","showDelegateModal","DELEGATE","toggelDelegateModal","startTimestamp","startBlock","endDate","fromSeconds","plus","seconds","undefined","now","local","totalVotes","forCount","againstCount","forPercentage","toFixed","againstPercentage","availableVotes","showVotingButtons","greaterThan","raw","BigInt","uniBalance","userDelegatee","showLinkForUnlock","Boolean","notEqual","linkIfAddress","content","commonName","width","marginBottom","title","toLocaleString","DATETIME_FULL","gap","maximumFractionDigits","details","map","d","i","target","functionSig","callData","split","length","description","proposer"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { AutoColumn } from '../../components/Column'\nimport styled from 'styled-components'\n\nimport { RouteComponentProps } from 'react-router-dom'\nimport { TYPE, StyledInternalLink, ExternalLink } from '../../theme'\nimport { RowFixed, RowBetween } from '../../components/Row'\nimport { CardSection, DataCard } from '../../components/earn/styled'\nimport { ArrowLeft } from 'react-feather'\nimport { ButtonPrimary } from '../../components/Button'\nimport { ProposalStatus } from './styled'\nimport { useProposalData, useUserVotesAsOfBlock, ProposalData, useUserDelegatee } from '../../state/governance/hooks'\nimport { useTimestampFromBlock } from '../../hooks/useTimestampFromBlock'\nimport { DateTime } from 'luxon'\nimport ReactMarkdown from 'react-markdown'\nimport VoteModal from '../../components/vote/VoteModal'\nimport { TokenAmount, JSBI } from '@uniswap/sdk'\nimport { useActiveWeb3React } from '../../hooks'\nimport { PROPOSAL_LENGTH_IN_SECS, COMMON_CONTRACT_NAMES, UNI, ZERO_ADDRESS } from '../../constants'\nimport { isAddress, getEtherscanLink } from '../../utils'\nimport { ApplicationModal } from '../../state/application/actions'\nimport { useModalOpen, useToggleDelegateModal, useToggleVoteModal } from '../../state/application/hooks'\nimport DelegateModal from '../../components/vote/DelegateModal'\nimport { GreyCard } from '../../components/Card'\nimport { useTokenBalance } from '../../state/wallet/hooks'\n\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`\n\nconst ProposalInfo = styled(AutoColumn)`\n  border: 1px solid ${({ theme }) => theme.bg4};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({ theme }) => theme.text1};\n\n  a {\n    color: ${({ theme }) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`\n\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({ theme }) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`\n\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme }) => theme.bg3};\n  position: relative;\n`\n\nconst Progress = styled.div<{ status: 'for' | 'against'; percentageString?: string }>`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme, status }) => (status === 'for' ? theme.green1 : theme.red1)};\n  width: ${({ percentageString }) => percentageString};\n`\n\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`\n\nconst WrapSmall = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`\n\nconst DetailText = styled.div`\n  word-break: break-all;\n`\n\nexport default function VotePage({\n  match: {\n    params: { id }\n  }\n}: RouteComponentProps<{ id: string }>) {\n  const { chainId, account } = useActiveWeb3React()\n\n  // get data for this specific proposal\n  const proposalData: ProposalData | undefined = useProposalData(id)\n\n  // update support based on button interactions\n  const [support, setSupport] = useState<boolean>(true)\n\n  // modal for casting votes\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE)\n  const toggleVoteModal = useToggleVoteModal()\n\n  // toggle for showing delegation modal\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE)\n  const toggelDelegateModal = useToggleDelegateModal()\n\n  // get and format date from data\n  const startTimestamp: number | undefined = useTimestampFromBlock(proposalData?.startBlock)\n  const endDate: DateTime | undefined = startTimestamp\n    ? DateTime.fromSeconds(startTimestamp).plus({ seconds: PROPOSAL_LENGTH_IN_SECS })\n    : undefined\n  const now: DateTime = DateTime.local()\n\n  // get total votes and format percentages for UI\n  const totalVotes: number | undefined = proposalData ? proposalData.forCount + proposalData.againstCount : undefined\n  const forPercentage: string =\n    proposalData && totalVotes ? ((proposalData.forCount * 100) / totalVotes).toFixed(0) + '%' : '0%'\n  const againstPercentage: string =\n    proposalData && totalVotes ? ((proposalData.againstCount * 100) / totalVotes).toFixed(0) + '%' : '0%'\n\n  // only count available votes as of the proposal start block\n  const availableVotes: TokenAmount | undefined = useUserVotesAsOfBlock(proposalData?.startBlock ?? undefined)\n\n  // only show voting if user has > 0 votes at proposal start block and proposal is active,\n  const showVotingButtons =\n    availableVotes &&\n    JSBI.greaterThan(availableVotes.raw, JSBI.BigInt(0)) &&\n    proposalData &&\n    proposalData.status === 'active'\n\n  const uniBalance: TokenAmount | undefined = useTokenBalance(account ?? undefined, chainId ? UNI[chainId] : undefined)\n  const userDelegatee: string | undefined = useUserDelegatee()\n\n  // in blurb link to home page if they are able to unlock\n  const showLinkForUnlock = Boolean(\n    uniBalance && JSBI.notEqual(uniBalance.raw, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS\n  )\n\n  // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n  const linkIfAddress = (content: string) => {\n    if (isAddress(content) && chainId) {\n      const commonName = COMMON_CONTRACT_NAMES[content] ?? content\n      return <ExternalLink href={getEtherscanLink(chainId, content, 'address')}>{commonName}</ExternalLink>\n    }\n    return <span>{content}</span>\n  }\n\n  return (\n    <PageWrapper gap=\"lg\" justify=\"center\">\n      <VoteModal isOpen={showVoteModal} onDismiss={toggleVoteModal} proposalId={proposalData?.id} support={support} />\n      <DelegateModal isOpen={showDelegateModal} onDismiss={toggelDelegateModal} title=\"Unlock Votes\" />\n      <ProposalInfo gap=\"lg\" justify=\"start\">\n        <RowBetween style={{ width: '100%' }}>\n          <ArrowWrapper to=\"/vote\">\n            <ArrowLeft size={20} /> All Proposals\n          </ArrowWrapper>\n          {proposalData && <ProposalStatus status={proposalData?.status ?? ''}>{proposalData?.status}</ProposalStatus>}\n        </RowBetween>\n        <AutoColumn gap=\"10px\" style={{ width: '100%' }}>\n          <TYPE.largeHeader style={{ marginBottom: '.5rem' }}>{proposalData?.title}</TYPE.largeHeader>\n          <RowBetween>\n            <TYPE.main>\n              {endDate && endDate < now\n                ? 'Voting ended ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                : proposalData\n                ? 'Voting ends approximately ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                : ''}\n            </TYPE.main>\n          </RowBetween>\n          {proposalData && proposalData.status === 'active' && !showVotingButtons && (\n            <GreyCard>\n              <TYPE.black>\n                Only UNI votes that were self delegated or delegated to another address before block{' '}\n                {proposalData.startBlock} are eligible for voting.{' '}\n                {showLinkForUnlock && (\n                  <span>\n                    <StyledInternalLink to=\"/vote\">Unlock voting</StyledInternalLink> to prepare for the next proposal.\n                  </span>\n                )}\n              </TYPE.black>\n            </GreyCard>\n          )}\n        </AutoColumn>\n        {showVotingButtons ? (\n          <RowFixed style={{ width: '100%', gap: '12px' }}>\n            <ButtonPrimary\n              padding=\"8px\"\n              borderRadius=\"8px\"\n              onClick={() => {\n                setSupport(true)\n                toggleVoteModal()\n              }}\n            >\n              Vote For\n            </ButtonPrimary>\n            <ButtonPrimary\n              padding=\"8px\"\n              borderRadius=\"8px\"\n              onClick={() => {\n                setSupport(false)\n                toggleVoteModal()\n              }}\n            >\n              Vote Against\n            </ButtonPrimary>\n          </RowFixed>\n        ) : (\n          ''\n        )}\n        <CardWrapper>\n          <StyledDataCard>\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <WrapSmall>\n                  <TYPE.black fontWeight={600}>For</TYPE.black>\n                  <TYPE.black fontWeight={600}>\n                    {' '}\n                    {proposalData?.forCount.toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                  </TYPE.black>\n                </WrapSmall>\n              </AutoColumn>\n              <ProgressWrapper>\n                <Progress status={'for'} percentageString={forPercentage} />\n              </ProgressWrapper>\n            </CardSection>\n          </StyledDataCard>\n          <StyledDataCard>\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <WrapSmall>\n                  <TYPE.black fontWeight={600}>Against</TYPE.black>\n                  <TYPE.black fontWeight={600}>\n                    {proposalData?.againstCount.toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                  </TYPE.black>\n                </WrapSmall>\n              </AutoColumn>\n              <ProgressWrapper>\n                <Progress status={'against'} percentageString={againstPercentage} />\n              </ProgressWrapper>\n            </CardSection>\n          </StyledDataCard>\n        </CardWrapper>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Details</TYPE.mediumHeader>\n          {proposalData?.details?.map((d, i) => {\n            return (\n              <DetailText key={i}>\n                {i + 1}: {linkIfAddress(d.target)}.{d.functionSig}(\n                {d.callData.split(',').map((content, i) => {\n                  return (\n                    <span key={i}>\n                      {linkIfAddress(content)}\n                      {d.callData.split(',').length - 1 === i ? '' : ','}\n                    </span>\n                  )\n                })}\n                )\n              </DetailText>\n            )\n          })}\n        </AutoColumn>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Description</TYPE.mediumHeader>\n          <MarkDownWrapper>\n            <ReactMarkdown source={proposalData?.description} />\n          </MarkDownWrapper>\n        </AutoColumn>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Proposer</TYPE.mediumHeader>\n          <ExternalLink\n            href={proposalData?.proposer && chainId ? getEtherscanLink(chainId, proposalData?.proposer, 'address') : ''}\n          >\n            <ReactMarkdown source={proposalData?.proposer} />\n          </ExternalLink>\n        </AutoColumn>\n      </ProposalInfo>\n    </PageWrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}